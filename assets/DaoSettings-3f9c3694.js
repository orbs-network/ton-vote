import{u as O,a as l,b as F,c as h,j as r,F as m,d as M,e as v,S as f,B as A,T as S,f as b,r as D,_ as L,g as P,h as E,L as R,i as w,k as p,M as V}from"./index-ff161176.js";function C(){const e=O(B),{daoAddress:n}=l(),s=F(n).data,t=h({initialValues:{ownerAddress:(s==null?void 0:s.daoRoles.owner)||"",proposalOwner:(s==null?void 0:s.daoRoles.proposalOwner)||""},validateOnChange:!1,validateOnBlur:!0,onSubmit:()=>{}});return r(m,{form:e,formik:t})}const B=({name:e,formik:n})=>{const{mutateAsync:s,isLoading:t}=M(),{mutateAsync:i,isLoading:o}=v(),a=n.values[e],u=n.initialValues[e],c=()=>{const d={newOwner:a,onError:y=>n.setFieldError(e,y)};if(e==="ownerAddress")return s(d);if(e==="proposalOwner")return i(d)},g=e==="ownerAddress"?t:o;return u===a?null:r(f,{children:r(A,{onClick:c,isLoading:g,children:r(S,{children:"Update"})})})},Q=()=>({title:"Dao Admin Settings",inputs:[{name:"fwdMsgFee",label:"Forward Message Fee",type:"number",EndAdornment:k}]});function j(){const e=Q(),{daoAddress:n}=l(),{data:s}=b(n),t=h({enableReinitialize:!0,initialValues:{fwdMsgFee:Number(s==null?void 0:s.fwdMsgFee)},validateOnChange:!1,validateOnBlur:!0,onSubmit:()=>{}});return r(m,{form:e,formik:t})}const k=({name:e,formik:n})=>{const{daoAddress:s}=l(),t=n.values[e],i=n.initialValues[e],o=F(s).data,{mutate:a,isLoading:u}=D.useSetDaoFwdMsgFee(),{refetch:c}=b(o==null?void 0:o.daoAddress),g=()=>{if(e==="fwdMsgFee")return a({daoIds:[o.daoId],amount:t,onError:d=>n.setFieldError(e,d),onSuccess:c})};return!L.isNumber(t)||i===t?null:r(f,{children:r(A,{onClick:g,isLoading:u,children:r(S,{children:"Update"})})})};function I(){const e=P(),{daoAddress:n}=l(),{isLoading:s,data:t}=F(n),{isOwner:i,isProposalPublisher:o}=E(t==null?void 0:t.daoRoles),a=i||o;return r(R,{title:e.settings,isLoading:s,children:w(p,{children:[r(j,{}),a&&w(p,{children:[r(C,{}),r(V,{})]})]})})}export{I as DaoSettings,I as default};
